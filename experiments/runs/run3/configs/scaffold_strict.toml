# REINVENT4 éª¨æ¶çº¦æŸç”Ÿæˆ - å¼ºåˆ¶å–ä»£åŸºç‰ˆæœ¬
# Run3: éªŒè¯éª¨æ¶å®šä¹‰çš„ç²¾ç¡®æ€§ï¼ˆç›®æ ‡100ä¸ªåˆ†å­ï¼‰

run_type = "staged_learning"
device = "cuda:0"
tb_logdir = "tb_run3_scaffold_strict"
json_out_config = "_run3_scaffold_strict.json"

[parameters]
summary_csv_prefix = "run3_scaffold_strict"
use_checkpoint = false
prior_file = "../priors/denv_ultra_clean_model.model"
agent_file = "../priors/denv_ultra_clean_model.model"
batch_size = 32
unique_sequences = true
randomize_smiles = true

[learning_strategy]
type = "dap"
sigma = 120
rate = 0.0001

[diversity_filter]
type = "IdenticalMurckoScaffold"
bucket_size = 15
minscore = 0.25
minsimilarity = 0.4

[inception]
smiles_file = "../data/denv_scaffolds_training.smi"
memory_size = 80
sample_size = 8

[[stage]]
max_score = 0.60
min_steps = 300
max_steps = 1000
chkpt_file = "checkpoints/run3_scaffold_strict.chkpt"

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# è¯„åˆ†ç­–ç•¥ï¼šarithmetic_meanï¼ˆORé€»è¾‘ï¼‰
# æ»¡è¶³ä»»æ„ä¸€ä¸ªéª¨æ¶å³å¯è·å¾—é«˜åˆ†
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[stage.scoring]
type = "arithmetic_mean"

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”¬ éª¨æ¶1ï¼šå¡å’¯çƒ·å‹ - å¼ºåˆ¶C5ä½å–ä»£åŸº
# ç‰¹å¾ï¼š
#   - 5å…ƒå«Næ‚ç¯
#   - C2ä½ï¼šèŠ³ç¯ï¼ˆè‹¯ç¯ï¼‰
#   - C3ä½ï¼šé…°èƒºåŸºå›¢
#   - C5ä½ï¼šå¿…é¡»æœ‰éæ°¢å–ä»£åŸºï¼ˆå…³é”®ä¿®æ”¹ï¼‰
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.MatchingSubstructure]
[[stage.scoring.component.MatchingSubstructure.endpoint]]
name = "Pyrrolidine_Scaffold_Strict"
weight = 1.0

[stage.scoring.component.MatchingSubstructure.endpoint.params]
# SMARTSè§£æï¼š
# C1-N([!H])-C(è‹¯ç¯)-C(é…°èƒº)-C1
#      ^^^^^ C5ä½å¿…é¡»è¿æ¥éæ°¢åŸå­
smarts = "C1N([!H])C(c2ccccc2)C(C(=O)N)C1"
use_chirality = false

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”¬ éª¨æ¶2ï¼šç¯ä¸çƒ·å‹ - å¼ºåˆ¶C3ä½å–ä»£åŸº
# ç‰¹å¾ï¼š
#   - 4å…ƒå…¨ç¢³ç¯
#   - C1ä½ï¼šé…°èƒºåŸºå›¢
#   - C2ä½ï¼šèŠ³ç¯ï¼ˆè‹¯ç¯ï¼‰
#   - C3ä½ï¼šå¿…é¡»æœ‰éæ°¢å–ä»£åŸºï¼ˆå…³é”®ä¿®æ”¹ï¼‰
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.MatchingSubstructure]
[[stage.scoring.component.MatchingSubstructure.endpoint]]
name = "Cyclobutane_Scaffold_Strict"
weight = 1.0

[stage.scoring.component.MatchingSubstructure.endpoint.params]
# SMARTSè§£æï¼š
# C1-C(è‹¯ç¯)-C([!H])-C1(é…°èƒº)
#            ^^^^^ C3ä½å¿…é¡»è¿æ¥éæ°¢åŸå­
smarts = "C1C(c2ccccc2)C([!H])C1C(=O)N"
use_chirality = false

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§ª QSARæ´»æ€§é¢„æµ‹
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.QSARScorer]
[[stage.scoring.component.QSARScorer.endpoint]]
name = "DENV_Activity"
weight = 1.2

[stage.scoring.component.QSARScorer.endpoint.params]
model_path = "/mnt/c/Users/ucsaheu/python_projects/DENV_Drug_Discovery/02_ML_Modeling/models/random_forest_champion.joblib"

[stage.scoring.component.QSARScorer.endpoint.transform]
type = "double_sigmoid"
low = 6.0
high = 8.0
coef_div = 8.0
coef_si = 5.0
coef_se = 5.0

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ’Š ç±»è¯æ€§
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.Qed]
[[stage.scoring.component.Qed.endpoint]]
name = "Drug_Likeness"
weight = 0.5

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§¬ åˆæˆå¯åŠæ€§
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.SAScore]
[[stage.scoring.component.SAScore.endpoint]]
name = "Synthetic_Accessibility"
weight = 0.4

[stage.scoring.component.SAScore.endpoint.transform]
type = "reverse_sigmoid"
low = 1.0
high = 7.5
k = 0.6

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âš–ï¸ åˆ†å­é‡
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.MolecularWeight]
[[stage.scoring.component.MolecularWeight.endpoint]]
name = "Molecular_Weight"
weight = 0.3

[stage.scoring.component.MolecularWeight.endpoint.transform]
type = "double_sigmoid"
low = 250.0
high = 500.0
coef_div = 500.0
coef_si = 15.0
coef_se = 15.0

#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš« ä¸è‰¯ç»“æ„è¿‡æ»¤
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[[stage.scoring.component]]
[stage.scoring.component.CustomAlerts]
[[stage.scoring.component.CustomAlerts.endpoint]]
name = "Unwanted_Substructures"
weight = 1.0

[stage.scoring.component.CustomAlerts.endpoint.params]
smarts = [
    "[*;r8]",
    "[*;r9]",
    "[*;r10]",
    "[#8][#8]",
    "[#6;+]",
    "[#16][#16]",
    "C#C"
]
